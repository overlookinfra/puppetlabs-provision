# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`provision`](#provision): Installs the provisioning tool (Terraform) on the target node

### Functions

* [`provision::gcp_profile`](#provision--gcp_profile)
* [`provision::with_tempfile_containing`](#provision--with_tempfile_containing)

### Data types

* [`Provision::CloudProvider`](#Provision--CloudProvider): This custom type is used to manage the list of cloud providers.
* [`Provision::HardwareArchitecture`](#Provision--HardwareArchitecture): This custom type is used to manage the list of architecture of a provisioned node.
* [`Provision::InstanceType`](#Provision--InstanceType): This custom type is used to manage the list of instance type to provisioned node.
* [`Provision::ProviderOptions`](#Provision--ProviderOptions): This custom type is used to manage the list of provider specific parameters.

### Plans

#### Public Plans

* [`provision::create`](#provision--create): Plan to provision a Virtual Machine in different cloud providers (GCP, AWS & Azure)
* [`provision::destroy`](#provision--destroy): Destroy a earlier provisioned virtual machine

#### Private Plans

* `provision::terraform::apply`: Plan to provision a Virtual Machine using Terraform for different cloud providers (GCP, AWS & Azure)
* `provision::terraform::destroy`: Destroy a earlier provisioned virtual machine using terraform

## Classes

### <a name="provision"></a>`provision`

Installs the provisioning tool (Terraform) on the target node

#### Parameters

The following parameters are available in the `provision` class:

* [`version`](#-provision--version)

##### <a name="-provision--version"></a>`version`

Data type: `String[1]`

The version of Terraform to install

Default value: `'1.5.7'`

## Functions

### <a name="provision--gcp_profile"></a>`provision::gcp_profile`

Type: Puppet Language

The provision::gcp_profile function.

#### `provision::gcp_profile()`

The provision::gcp_profile function.

Returns: `String`

### <a name="provision--with_tempfile_containing"></a>`provision::with_tempfile_containing`

Type: Ruby 4.x API

The provision::with_tempfile_containing function.

#### `provision::with_tempfile_containing(String $name, String $contents, Optional[String] $extension, Callable[1, 1] &$block)`

The provision::with_tempfile_containing function.

Returns: `Any`

##### `name`

Data type: `String`



##### `contents`

Data type: `String`



##### `extension`

Data type: `Optional[String]`



##### `&block`

Data type: `Callable[1, 1]`



## Data types

### <a name="Provision--CloudProvider"></a>`Provision::CloudProvider`

This custom type is used to manage the list of cloud providers.

Alias of `Enum['gcp', 'aws', 'azure']`

### <a name="Provision--HardwareArchitecture"></a>`Provision::HardwareArchitecture`

This custom type is used to manage the list of architecture of a provisioned node.

Alias of `Enum['arm', 'amd', 'intel']`

### <a name="Provision--InstanceType"></a>`Provision::InstanceType`

This custom type is used to manage the list of instance type to provisioned node.

Alias of `Enum['xlarge', 'large', 'standard', 'small', 'micro']`

### <a name="Provision--ProviderOptions"></a>`Provision::ProviderOptions`

This custom type is used to manage the list of provider specific parameters.

Alias of `Hash[String[1], Variant[String[1], Integer, Boolean]]`

## Plans

### <a name="provision--create"></a>`provision::create`

Plan to provision a Virtual Machine in different cloud providers (GCP, AWS & Azure)

#### Parameters

The following parameters are available in the `provision::create` plan:

* [`provider`](#-provision--create--provider)
* [`resource_name`](#-provision--create--resource_name)
* [`instance_size`](#-provision--create--instance_size)
* [`image`](#-provision--create--image)
* [`region`](#-provision--create--region)
* [`subnet`](#-provision--create--subnet)
* [`security_group_ids`](#-provision--create--security_group_ids)
* [`tags`](#-provision--create--tags)
* [`node_count`](#-provision--create--node_count)
* [`provider_options`](#-provision--create--provider_options)
* [`pe_server`](#-provision--create--pe_server)
* [`environment`](#-provision--create--environment)
* [`os_type`](#-provision--create--os_type)
* [`hardware_architecture`](#-provision--create--hardware_architecture)
* [`project`](#-provision--create--project)

##### <a name="-provision--create--provider"></a>`provider`

Data type: `Provision::CloudProvider`

The cloud provider to use for provisioning

Default value: `'aws'`

##### <a name="-provision--create--resource_name"></a>`resource_name`

Data type: `String[1]`

The name of the resource to be provisioned, the same will be use to manage the state of the infrastructure.
So the preference is to use the unit name for the provisioned infrastructure

Default value: `'provision'`

##### <a name="-provision--create--instance_size"></a>`instance_size`

Data type: `Provision::InstanceType`

The instance size to be provisioned, the module will translate the instance size to the cloud provider specific
instance type depending on the provider.

Default value: `'micro'`

##### <a name="-provision--create--image"></a>`image`

Data type: `Optional[String[1]]`

The cloud image that is used for new instance provisioning, the format of image varies
depending on provider
AWS : For AWS, the image name pattern can include both with and without an account ID prefix.
  For example, without the account ID prefix, it can be "AlmaLinux OS 8.8*," and
  with the account ID prefix, it can be "764336703387/AlmaLinux OS 8.8*."

Default value: `undef`

##### <a name="-provision--create--region"></a>`region`

Data type: `Optional[String[1]]`

Which region to provision infrastructure in, if not provided default will
be determined by provider

Default value: `undef`

##### <a name="-provision--create--subnet"></a>`subnet`

Data type: `Optional[String[1]]`

Name or ID of an existing subnet to attach newly provisioned VMs to

Default value: `undef`

##### <a name="-provision--create--security_group_ids"></a>`security_group_ids`

Data type: `Optional[Array[String[1]]]`

The list of security groups which will be attached to the newly provisioned VMs

Default value: `undef`

##### <a name="-provision--create--tags"></a>`tags`

Data type: `Optional[Hash[String[1], String[1]]]`

The list of tags to be attached to the newly provisioned VMs

Default value: `{}`

##### <a name="-provision--create--node_count"></a>`node_count`

Data type: `Optional[Integer[1, 10]]`

The number of instance/VMs to be provisioned in the given cloud provider
User can provision mininum of 1 instance and maximum of 10 instances at a time.

Default value: `1`

##### <a name="-provision--create--provider_options"></a>`provider_options`

Data type: `Optional[Provision::ProviderOptions]`

The list of cloud provider options to be passed to the provisioning module
Eg:
  For instance, when configuring options for AWS, you can include the following settings:
  {
    "ssh_key_name": "ssh_key_name",         # The SSH key-pair name for provisioning the instance.
    "root_block_device_volume_type": "gp3", # The type of the root block device.
    "root_block_device_volume_size": 10,     # The volume size of the root block device in GB.
    "associate_public_ip_address": true             # Associate a public IP address to provisioned instance.
  }

  These settings allow you to customize the provisioning process based on cloud provider and specific requirements.
Eg:
  For instance, when configuring options for GCP, you can include the following settings:
  {
    "root_block_device_volume_type": "pd-ssd", # Boot Disk Type.
    "root_block_device_volume_size": 10     # Boot Disk Size.
    "network": "<network-name-on-gcp>"
    "subnetwork": "<subnetwork-name-on-gcp>"
    "subnetwork_project": "<subnetwork-project-on-gcp>"
  }

Default value: `undef`

##### <a name="-provision--create--pe_server"></a>`pe_server`

Data type: `Optional[String[1]]`

The The PE server to be used for pointing the VM's puppet agent to

Default value: `undef`

##### <a name="-provision--create--environment"></a>`environment`

Data type: `Optional[String[1]]`

The puppet environment to place the agent in

Default value: `'production'`

##### <a name="-provision--create--os_type"></a>`os_type`

Data type: `Optional[Enum['linux', 'windows']]`

The type of operating system (linux or windows) to be used for provisioning the VMs

Default value: `'linux'`

##### <a name="-provision--create--hardware_architecture"></a>`hardware_architecture`

Data type: `Provision::HardwareArchitecture`



Default value: `'amd'`

##### <a name="-provision--create--project"></a>`project`

Data type: `Optional[String[1]]`



Default value: `undef`

### <a name="provision--destroy"></a>`provision::destroy`

Destroy a earlier provisioned virtual machine

#### Parameters

The following parameters are available in the `provision::destroy` plan:

* [`provider`](#-provision--destroy--provider)
* [`region`](#-provision--destroy--region)
* [`resource_name`](#-provision--destroy--resource_name)
* [`provider_options`](#-provision--destroy--provider_options)
* [`project`](#-provision--destroy--project)

##### <a name="-provision--destroy--provider"></a>`provider`

Data type: `Provision::CloudProvider`

Which cloud provider that infrastructure will be provisioned into

Default value: `'aws'`

##### <a name="-provision--destroy--region"></a>`region`

Data type: `Optional[String[1]]`

Which region to provision infrastructure in, if not provided default will
be determined by provider

Default value: `undef`

##### <a name="-provision--destroy--resource_name"></a>`resource_name`

Data type: `String[1]`

The name of the resource to be provisioned on respective cloud provider

##### <a name="-provision--destroy--provider_options"></a>`provider_options`

Data type: `Optional[Provision::ProviderOptions]`

A hash of provider specific options to be passed to the Terraform provider

Default value: `undef`

##### <a name="-provision--destroy--project"></a>`project`

Data type: `Optional[String[1]]`



Default value: `undef`

